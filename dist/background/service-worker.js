chrome.management.getSelf(s=>{if(s.installType==="development"){const a=["http://127.0.0.1:5501/dist/manifest.json","http://127.0.0.1:5501/dist/options/options.js","http://127.0.0.1:5501/dist/background/service-worker.js","http://127.0.0.1:5501/dist/content/content.js"],t={},n=()=>{chrome.tabs.query({active:!0,currentWindow:!0},e=>{e[0]&&chrome.tabs.reload(e[0].id),chrome.runtime.reload()})},o=()=>{a.forEach(e=>{fetch(e).then(r=>r.text()).then(r=>{t[e]&&t[e]!==r?n():t[e]=r}).catch(r=>{console.error("Error checking folder changes:",r)})})},c="LISTENER_FILE_TEXT_CHANGE";(async()=>{typeof await chrome.alarms.get(c)>"u"&&(chrome.alarms.create(c,{periodInMinutes:.1}),o())})(),chrome.alarms.onAlarm.addListener(o)}});chrome.tabs.onActivated.addListener(async s=>{const a=await chrome.storage.local.get("settings")||{};chrome.tabs.sendMessage(s.tabId,a.settings)});chrome.action.onClicked.addListener(async()=>{const s=await chrome.storage.local.get("settings")||{},{url:a,path:t}=s.settings||{};if(a){const[n]=a.split(","),o=n.replace(/\/$/,""),c=t?t.indexOf("/")===-1?"/"+t:t:"/my/page",i=new URL(c,o).href,e=await chrome.tabs.query({url:[`${o}/*`]});e.length>0?chrome.tabs.update(e[0].id,{active:!0,url:i}):chrome.tabs.create({url:i})}});
